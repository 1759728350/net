








# 暂存栈2docker

(1） docker从基础镜像运行一个容器
(2）执行一条指令并对容器作出修改
(3）执行类似docker commit的操作提交一个新的镜像层
(4) docker再基于刚提交的镜像运行一个新容器
(5）执行dockerfile中的下一条指令直到所有指令都执行完成

# 暂存栈1配置文件

作为运维人员，需要编辑的主要配置文件可能包括但不限于：

4. **Cron 任务**：`/etc/crontab` 和 `/etc/cron.d/` 中的定时任务配置文件。
5. **网络配置文件**：`/etc/network/interfaces` 等文件用于配置网络接口。
6. **日志文件配置**：如 `rsyslog.conf` 用于配置系统日志功能。
7. **安全设置**：比如 `/etc/securetty` 用于限制哪些 TTY 设备可以登录 root 用户等。



# 暂存栈3性能监控相关

1. 如何查看系统的 CPU 使用情况？
2. 怎样查看系统内存的使用情况和统计信息？
3. 在 CentOS 7 中如何查看网络连接和端口状态？
4. 如何监视系统的磁盘空间占用情况？
5. 怎样查看系统的进程信息以及运行状况？


1. **top：** `top` 命令可以实时显示系统中运行的进程、CPU利用率、内存利用情况等信息，可以快速了解系统当前的性能情况。
    
2. **vmstat：** `vmstat` 命令可以报告系统的虚拟内存状态，包括内存、交换区、磁盘I/O和CPU利用率等信息，可以用来监视系统的整体性能状况。
    
3. **iostat：** `iostat` 命令用来查看系统的磁盘I/O性能，包括磁盘读写速度、平均响应时间等信息。
    
4. **sar：** `sar` 命令可以收集、报告系统的性能数据，包括CPU利用率、内存使用情况、磁盘I/O等，通过定时收集数据可以进行更深入的性能分析。
    
5. **free：** `free` 命令用来查看系统的内存使用情况，包括空闲内存、已用内存、缓存、交换区等信息。
    
6. **netstat：** `netstat` 命令用来查看网络相关信息，包括网络连接、路由表、网络接口统计等，可以帮助排查网络性能问题。
    
7. **strace：** `strace` 命令用来跟踪进程的系统调用和信号传递，可以用来分析程序的执行过程以及性能瓶颈。

### 3333

最需要使用netstat命令：

1. **网络故障排除**：当服务器出现网络连接问题时，可以使用netstat命令查看当前的网络连接状态，包括连接建立、监听状态等信息，帮助定位问题所在。
    
2. **端口冲突检测**：在部署新应用程序或服务时，可能会遇到端口冲突的情况。通过netstat命令可以查看哪些端口已经被占用，避免端口冲突导致服务无法正常启动。
    
3. **监控网络流量**：通过netstat命令可以实时监控网络流量情况，包括连接数、数据传输量等，帮助及时发现异常情况或网络负载过高的问题。
    
4. **安全审计**：通过netstat命令可以查看当前系统的所有活动连接，帮助识别潜在的安全风险和异常活动，及时采取相应的安全措施。
    
5. **网络性能优化**：通过netstat命令可以查看网络接口的统计信息，如错误数据包数量、丢包率等，帮助分析网络性能瓶颈并进行调优。

#### 4444

一个 Linux 系统能够建立的最大网络连接数量取决于多个因素，包括系统配置、硬件资源、网络协议栈参数设置等。通常来说，Linux 系统能够支持非常大数量的网络连接，具体取决于系统的配置和处理能力。

在 Linux 中，有一些关键参数可以影响系统的最大网络连接数，例如：

1. **文件描述符限制**：每个网络连接都需要一个文件描述符。你可以通过 `ulimit -n` 命令查看当前用户的文件描述符限制，以及通过修改 `/etc/security/limits.conf` 文件来设置文件描述符的最大数量。

2. **TCP 连接参数**：Linux 系统中的 TCP 连接参数也会影响最大连接数。你可以通过修改 `/proc/sys/net/ipv4/tcp_max_syn_backlog`、`/proc/sys/net/core/somaxconn` 等文件来调整系统的 TCP 连接参数。

3. **系统资源**：系统的内存、CPU 和网络带宽等资源也会限制系统能够支持的最大连接数。

通常情况下，合理配置的 Linux 系统可以支持上千甚至上万个网络连接。如果你需要更具体的数字，可以通过查看系统的文件描述符限制、网络连接参数等来确定系统当前支持的最大连接数。




网络连接在不同的系统和协议中有各种不同的状态，常见的网络连接状态包括：

1. **TCP连接状态**：
    - **CLOSED**：连接已经关闭。
    - **LISTEN**：服务端正在监听来自客户端的连接请求。
    - **SYN_SENT**：客户端发送连接请求（SYN）。
    - **SYN_RECV**：服务端收到客户端的连接请求，并发送确认。
    - **ESTABLISHED**：连接已经建立，数据传输阶段。
    - **FIN_WAIT1**：表示本地已经发送连接结束请求，等待远程回应。
    - **FIN_WAIT2**：本地已经接收到远程的结束请求，或者已经发送结束请求但未收到回应。
    - **CLOSE_WAIT**：远程已经关闭连接，本地正在等待关闭。
    - **CLOSING**: 双方同时尝试关闭连接。

2. **UDP连接状态**：
    - 在 UDP 协议中，并没有像 TCP 那样明确的连接状态，因为 UDP 是面向无连接的协议。

3. **HTTP连接状态**：
    - **ESTABLISHED**：HTTP连接已建立，数据传输中。
    - **WAITING**：等待服务器响应。
    - **FIN_WAIT**：请求结束，等待关闭连接。

这些是一些常见的网络连接状态，具体状态会根据不同的网络协议和实现来确定。每种状态代表了连接在不同阶段的状态和行为。在实际网络调试和监控中，了解这些连接状态有助于更好地理解网络传输过程中的状态和问题。

\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\]]]]]]]]]]]]]]]]]]]]]]]]]]]]]


当服务器出现网络连接问题时，可以使用netstat命令结合其他工具进行故障排除。以下是另一个示例：

假设服务器上某个服务频繁断开连接，可能是因为网络波动或者服务配置问题。

1. 使用netstat命令查看服务器上所有的网络连接状态，并筛选出要排查的服务所使用的端口（例如8080）:

```bash
netstat -tuln | grep :8080
```

2. 检查当前连接状态，特别关注是否有大量的TIME_WAIT状态的连接，如果存在，说明有连接频繁断开。

3. 使用tcpdump工具监听特定端口的网络流量，以查看连接是否存在异常波动：

```bash
sudo tcpdump -i eth0 port 8080
```

4. 观察tcpdump输出，检查是否有异常的连接行为，比如连接频繁建立和断开。

5. 根据观察到的异常现象，可以进一步排查是网络波动导致的问题还是服务配置的异常，然后采取相应措施调整网络环境或服务配置。

通过以上步骤，结合netstat命令和tcpdump工具，可以帮助定位并解决服务频繁断开连接的问题，确保稳定的网络连接和服务运行。



----------------------------------------------------------------------

当然，另一个网络性能调优的例子是使用netstat命令结合TCP参数来优化TCP连接的性能。通过调整TCP参数，我们可以提高网络的稳定性、可靠性和效率。

以下是一个具体的调优例子：

1. 查看当前系统的TCP连接情况：

```bash
netstat -nat
```

2. 观察TCP连接状态，如ESTABLISHED、TIME_WAIT等，以及连接数等信息，从中分析出现问题的连接或瓶颈点。
    
3. 调整TCP参数，例如调整TCP连接超时时间（TCP keepalive）、TCP窗口大小（TCP window size）等，以改善网络连接性能。可以使用`sysctl`命令修改TCP参数，例如调整TCP连接超时时间：
    

```bash
sudo sysctl -w net.ipv4.tcp_keepalive_time=120
```

4. 根据实际情况和需要调整其他TCP参数，例如增加TCP连接缓冲区大小、调整最大连接数限制等，以优化系统的网络性能。

通过调整TCP参数，我们可以提高网络连接的稳定性和效率，减少连接延迟和丢包率，从而改善系统的网络性能。

