
#### OSI七层模型是什么

七层模型包含应用层,表示层,会话层,

然后是传输层,网络层,数据链路层和物理层

* 应用层常用协议比如:http,telnet,ssh,ftp,dns协议,主要用于为应用程序提供网络接口

* 表示层就是对数据进行编码,加密,格式化

* 会话层就是对简历的通信会话进行管理

报文

* 传输层使用tcp,udp协议,端口到端口传输,主要就是进行可靠传输和流量控制,拥塞控制

分组

* 网络层使用ip协议,实现主机到主机的通信

分组

* 数据链路层对网络链路进行管理,通过数据帧传输数据,arp协议来解决数帧发送给哪个主机

数据帧

* 物理层通过物理介质传输比特流



#### tcp和udp区别

tcp协议需要建立连接

udp协议不需要建立连接

```ts
TCP协议和UDP协议在功能和特性上有以下区别：

1. 可靠性：TCP是一种可靠的传输协议，它通过序号、确认和重传机制来确保数据的可靠传输。TCP会自动检测并重新发送丢失或损坏的数据包，同时保证数据包按正确的顺序到达目的地。而UDP是一种不可靠的传输协议，它没有提供数据的可靠性保证，发送的数据可能会丢失、重复、乱序或损坏。

2. 连接性：TCP是面向连接的协议，需要在通信双方建立连接后才能进行数据传输。连接的建立过程使用三次握手，保证了通信的稳定性和可靠性。UDP是无连接的协议，通信双方之间在发送和接收数据时不需要事先建立连接。

3. 数据传输方式：TCP提供面向流的服务，将连续的数据流划分为大小不等的数据块，并保证按照顺序进行传输，接收方按照原始顺序重新组装数据。UDP则是面向报文的协议，将应用层数据封装成独立的报文，并以报文为单位进行发送与接收。

4. 拥塞控制：TCP具有拥塞控制机制，通过动态调整发送速率和检测网络状况来避免网络拥塞。UDP没有拥塞控制机制，发送方以固定的速率发送数据，无法适应网络的变化。

5. 延迟：由于TCP的可靠性和连接性特性，以及拥塞控制机制的影响，其传输延迟相对较高。UDP没有以上机制的限制，因此传输延迟相对较低，适用于实时性要求高的应用，如语音通话、视频流传输等。

总结来说，TCP协议提供了可靠的、面向连接的数据传输，适合对数据可靠性和顺序要求较高的场景。而UDP协议是一种无连接的、不可靠的传输协议，适用于实时性要求较高、对数据完整性要求较低的应用。选择使用TCP还是UDP取决于具体的应用需求和性能要求。
```

#### 可靠性

```ts
TCP协议通过以下机制来提供可靠性的数据传输：

1. 三次握手,四次挥手:序号与确认机制：发送方将每个数据包分配一个唯一的序号，并在数据包头部发送给接收方。接收方收到数据包后会发送确认消息（ACK），确认已经成功接收到的数据包。如果发送方在一定时间内未收到确认消息，会重传该数据包。
2. 数据校验和：每个TCP数据包都包含了一个校验和，用于检测数据在传输过程中是否损坏。接收方会计算接收到的数据包校验和，如果发现校验和不匹配，则表示数据包可能已损坏，要求发送方进行重传。
3. 滑动窗口机制：TCP协议使用滑动窗口机制来控制发送端和接收端之间的数据流量，以避免网络拥塞。滑动窗口机制可以动态调整发送的数据量，确保发送方和接收方之间的数据传输速度匹配，并进行流量控制。
4. 超时与重传：TCP协议使用超时定时器来追踪发送数据包的确认情况。如果在超时时间内未收到确认消息，发送方将重传相应的数据包。超时和重传机制确保数据能够在合理的时间内被正确地传输。

通过这些机制，TCP协议能够提供可靠的数据传输服务。它能够检测并纠正丢失、重复、乱序或损坏的数据包，并确保数据包按正确的顺序到达目的地。同时，TCP协议也具备拥塞控制和流量控制机制，以避免网络拥塞和数据丢失。
```

#### 三次握手四次挥手

客户端要建立连接,syn=1,发一个序列号x

然后服务端接收到客户端发的序列号后将ack=x+1发给客户端,并发一个序列号y

客户端收到后,将SYN设置为1,发给服务端一个确认号ack=y+1

客户端发一个序列号,服务器接收后发确认号加随机序列号,客户端发一个确认号



握手

​	四次挥手主要就是客户端发送一个fin来告诉服务端要断开

​	服务端收到断开请求但还有数据没发完,所以发一个fin包告诉客户端收到断开请求,但还要等待一下

​	当服务器都发送完毕后,服务器会再想客户端发送fin包,发送完了,表示可以断了

​	客户端收到fin包后方ack确认断开


