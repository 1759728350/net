

1. 网络配置：了解如何配置网络接口、IP 地址、子网掩码、网关等基本网络参数，以确保主机能够正确连接到网络。

2. 路由管理：学习路由表的概念，了解如何查看、添加、删除和修改路由条目，以实现不同网络间的数据包转发。

3. 防火墙配置：掌握 Linux 防火墙工具（如 iptables 或 firewalld）的使用，可以设置规则来控制进出主机的网络流量，保护系统安全。

4. 网络监控：学习使用网络监控工具（如 ifconfig、ip、tcpdump、Wireshark 等）来监视网络接口、网络流量、数据包传输等情况，以便及时排查和解决网络问题。

5. 网络服务配置：了解如何配置和管理常见的网络服务，比如 DNS 服务、DHCP 服务、Web 服务器、邮件服务器等，以提供各种网络功能和服务。

6. 软件定义网络（SDN）：了解 SDN 的概念和原理，以及如何在 Linux 系统上部署和管理 SDN 技术，实现灵活、高效的网络管理。

7. 负载均衡和故障转移：学习如何配置负载均衡器和实现故障转移机制，以确保网络服务的高可用性和可靠性。

### 网络配置

##### 查看网络接口信息
`ip addr` 命令是一个用于查看和管理网络接口信息的强大工具，替代了ifconfig。

1. **语法**：
```java
   ip addr [show/dev <interface>
		   |add <address>/<prefix_len> dev <interface>
		   |del <address>/<prefix_len> dev <interface>]
```

2. **常见用法**：

   - **查看所有网络接口信息**：执行 `ip addr show` 命令可列出系统中所有网络接口的详细信息，包括名称、MAC 地址、IP 地址、子网掩码、广播地址和状态等。

   - **查看特定接口信息**：可以使用 `ip addr show <interface>` 来显示特定网络接口的详细信息。例如：
	```shell
	ip addr show eth0
	```
```php
	2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 52:54:00:03:15:76 brd ff:ff:ff:ff:ff:ff
    inet 10.0.4.10/22 brd 10.0.7.255 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::5054:ff:fe03:1576/64 scope link 
       valid_lft forever preferred_lft forever
```

   - **添加 IP 地址和子网掩码**：通过 `ip addr add` 命令可以为指定网络接口设置 IP 地址和子网掩码。例如，为 `eth0` 接口添加 IP 地址为 `192.168.0.2/24`：
     ```php
     sudo ip addr add 192.168.0.2/24 dev eth0
     ```

   - **删除 IP 地址**：使用 `ip addr del` 命令可以删除网络接口上的指定 IP 地址。举例，从 `eth0` 接口删除 IP 地址 `192.168.0.2`：
     ```php
     sudo ip addr del 192.168.0.2 dev eth0
     ```

3. **其他用法**：

   - `ip addr` 命令还可以显示、添加、删除和修改网络接口的其他属性，如广播地址、点对点地址、IPv6 地址 ,  MAC 地址、启用或禁用接口等。




##### 配置ip和子网掩码

1. ip addr配置

2. **永久配置**：

   - 在大多数 Linux 发行版中，网络接口的静态 IP 地址和子网掩码通常在 `/etc/network/interfaces` 文件中配置

   - 设置完成后，记得重启网络服务或者重启系统使更改生效。


##### 私有网络
1. 10.0.0.0 - 10.255.255.255 （CIDR：10.0.0.0/8）
2. 172.16.0.0 - 172.31.255.255 （CIDR：172.16.0.0/12）
3. 192.168.0.0 - 192.168.255.255 （CIDR：192.168.0.0/16）
4. 169.254.0.0/16  在某些情况下，设备无法获得有效的IP地址（比如DHCP服务器不可用），就会使用这个地址段来自动分配一个私有IP地址，用于设备之间的本地连接，以便局域网内设备之间进行通信。





### 虚拟机网络架构
##### 常见网络模式架构
常见的网络模式包括以下几种：

1. 桥接模式（Bridge Mode）：在桥接模式下，虚拟机和宿主机连接到同一个物理网络，使得虚拟机就像是直接连接到了物理网络一样。

2. NAT模式（Network Address Translation Mode）：在NAT模式下，虚拟机通过宿主机进行网络通信，并且使用宿主机的IP地址来与外部网络通信。

3. 主机模式（Host-Only Mode）：在主机模式下，虚拟机可以与宿主机进行通信，但无法直接访问外部网络，只能与宿主机之间通信。


##### 桥接网络
1. <font color=#99CCFF style=" font-weight:bold;">虚拟机和宿主机处于同一个局域网中，并列关系</font>, 虚拟机的虚拟网络适配器会通过虚拟网桥连接到宿主机的物理网络适配器，使得在该局域网中, 虚拟机和主机的网络适配器处于并列。
2. 虚拟机可以获取局域网内的IP地址：由于虚拟机和宿主机在同一个局域网中，虚拟机可以通过DHCP服务获取局域网内的IP地址，这样虚拟机就能够与局域网内的其他设备进行通信。
3. 虚拟机与外部网络通信：通过桥接模式，虚拟机可以与宿主机所在局域网外部的网络进行通信，实现虚拟机与外部网络的互联互通。
<font color=#FFCCCC style=" font-weight:bold;">总结: 桥接就是凭空多蹦出一个和主机同层次,同网段 的另一个主机</font>

![](img/Pasted%20image%2020240407202050.png)


##### nat网络模式

在NAT（Network Address Translation）模式下，虚拟机和主机的网络关系如下：

1. 虚拟机使用宿主机的IP地址进行通信：在NAT模式下，虚拟机的网络流量会通过宿主机进行转发，虚拟机无法直接与宿主机所在的局域网内的其他设备通信。虚拟机会使用宿主机的IP地址来与外部网络通信。

2. 宿主机作为虚拟机和外部网络之间的中介：所有发往虚拟机的请求和响应都会经过宿主机，宿主机会根据NAT规则将这些数据包进行地址转换，使得虚拟机似乎直接与外部网络通信。

3. 虚拟机无法直接被外部网络访问：由于虚拟机使用宿主机的IP地址，外部网络无法直接访问虚拟机，需要通过宿主机来转发数据包。

总的来说，在NAT模式下，虚拟机通过宿主机进行网络通信，并且虚拟机无法直接被外部网络访问。宿主机扮演了虚拟机与外部网络之间的中介角色，对虚拟机的网络流量进行转发和地址转换。
![](img/Pasted%20image%2020240407202117.png)
从上面可以看出,
虚拟机是靠连接nat再连接到主机网卡,来向外网进行通信的,
虚拟网卡只是用来让虚拟机和主机通信的

[详细](https://blog.csdn.net/tjcwt2011/article/details/129046127?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171247226916800182122412%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=171247226916800182122412&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-2-129046127-null-null.142^v100^pc_search_result_base3&utm_term=%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E5%92%8C%E8%BF%9E%E6%8E%A5&spm=1018.2226.3001.4187)

##### 仅主机模式
因为虚拟网卡没有直接连接到主机的网卡上,
所以无法向外通信
![](img/Pasted%20image%2020240407202156.png)

### 网络连通分析步骤
确定主机连接到了正确的目的网络通常涉及以下几个步骤：

1. **检查 IP 地址配置**：首先，您需要确认主机的 IP 地址是否配置正确。您可以使用命令行工具如 `ifconfig` 或 `ipconfig` 来查看主机的 IP 地址、子网掩码和网关配置是否符合目标网络的要求。

2. **验证网关设置**：确保主机的网关设置正确。网关是连接本地网络与其他网络的关键设备，主机必须将数据包发送给网关以访问其他网络。通过检查网关设置是否指向正确的网关 IP 地址，可以确认主机连接到了正确的目的网络。

3. **进行连通性测试**：使用诸如 `ping` 命令或其他网络工具来测试主机与目标网络之间的连通性。如果能够成功 ping 通目标网络上的其他主机或服务器，那么主机很可能已经连接到了正确的网络。

4. **查看路由表**：查看主机的路由表，确为确保主机连接到了正确的目的网络，您可以执行以下几项验证步骤：

1. **检查 IP 地址配置**：首先，您可以确认主机的 IP 地址和子网掩码是否正确配置。您可以使用命令 `ifconfig` 或 `ip config`（取决于您的操作系统）来查看当前网络接口的配置信息。

2. **检查网关配置**：确认主机的默认网关是否正确配置。默认网关通常是主机用来发送数据到其他网络的路由器的 IP 地址。您可以使用 `route -n` 命令查看当前路由表信息，确保默认网关设置正确。

3. **Ping 测试**：尝试通过 Ping 命令测试主机是否能够与目标网络上的其他设备进行通信。您可以使用 `ping 目标IP地址` 进行测试。如果 Ping 成功，表示主机已经连接到了目标网络。

4. **Traceroute**：使用 traceroute 命令跟踪数据包从您的主机到目标网络的路径。这可以帮助您确定数据包是否按预期路由。使用 `traceroute 目标IP地址` 来执行 traceroute。

5. **网络拓扑图**：查看网络拓扑图，确认主机所在的网络拓扑结构和连接情况。这有助于您了解主机的实际连接位置和路径。













### 栈
在学习 Linux 网络配置时，我们可以深入了解以下几个核心概念和技能：

1. 网络接口配置：了解如何查看系统中的网络接口信息，如网卡名称、MAC 地址等，以及如何配置网络接口的参数，如 IP 地址、子网掩码、MTU 等。常用命令包括 `ifconfig` 和 `ip addr`。

2. IP 地址配置：掌握如何为系统配置静态 IP 地址或使用 DHCP 动态获取 IP 地址，以确保主机能够正确与网络通信。可以通过编辑配置文件（如 `/etc/network/interfaces`）或使用命令行工具进行配置。

3. 子网掩码配置：了解子网掩码的作用和原理，学习如何设置正确的子网掩码以划分网络和确定主机所属的子网。

4. 网关配置：理解网关的作用，学习如何配置默认网关以实现主机与其他网络的通信。通常需要编辑网络配置文件或使用 `route` 命令添加网关。

5. DNS 配置：了解 DNS 的作用和原理，学习如何配置主机的 DNS 服务器地址以实现域名解析。可以编辑 `/etc/resolv.conf` 文件来配置 DNS 服务器。

6. 网卡绑定（Bonding）和虚拟网卡（VLAN）：学习如何配置网卡绑定或虚拟网卡，以实现负载均衡、故障转移或虚拟网络划分等特定网络需求。

7. 网卡状态管理：了解如何启用或禁用网络接口，以及如何查看和修改接口的状态和属性。常用命令包括 `ifup`、`ifdown` 和 `ethtool`。

通过深入学习以上内容，可以帮助管理员更好地理解和配置 Linux 系统中的网络接口，确保系统正确连接到网络并顺利进行网络通信。这些知识对于构建稳定、高效的网络环境至关重要，并且有助于快速排除网络配置问题和故障。















+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
